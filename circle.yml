#circle.yml
machine:
  services:
    - docker
  node:
    version: $NODE_VERSION

dependencies:
  pre:
    - docker login -e $DOCKER_EMAIL -u $DOCKER_USER -p $DOCKER_PASS

  override:
    - npm install

test:
  override:
    - npm test

deployment:
  master:
    branch: master
    commands:
       - npm prune --production
       - docker build -t nodecraft/2fa-2-slack .
       - docker push nodecraft/2fa-2-slack